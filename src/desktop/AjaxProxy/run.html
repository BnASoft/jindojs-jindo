<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<title>cross-domain ajax test</title>
		
		<!-- saved from url=(0014)about:internet -->
		<script src="flashObject.js" language="javascript"></script>
		
		<script type="text/javascript">
		<!--//
			var InternetExplorer = navigator.appName.indexOf("Microsoft") != -1;
			function callback(){
				alert("ExternalInterface ok");
			}
			function test2(success,data){
				alert("result : "+success+","+data);
			}

			function test1(){
				//var caObj = document.getElementById("CrossAjax");
				var sPram = new String();
				var caObj = window.document["CrossAjax"];
				//alert(caObj.width);
				sParam = "{\"url\":\"test.txt?21\", \"type\":\"GET\", \"data\":\"test\", \"callback\":\"test2\", \"header_json\":{\"pistos2\":true}, \"charset\":\"euc-kr\"}";
				
				caObj.requestViaFlash(sParam);
				/*
				 * 
				caObj.SetVariable("url", "http://127.0.0.1:8000/request.html");
				caObj.SetVariable("type","GET");
				caObj.SetVariable("data","test");
				caObj.SetVariable("callback","test2");
				caObj.SetVariable("header_json","");
				caObj.SetVariable("charset","UTF-8");
				*/
				//caObj.requestViaFlash("http://127.0.0.1:8000/request.html","GET", "test", "test2", "", "UTF-8");
			}
			function test2(success,data){

				try
				{
					console.log(success);
				}
				catch(e)
				{
					console.log(e);
				}

				try
				{
					console.log(data);
				}
				catch(e)
				{
					console.log(e);
				}
				
				//var a = data;

				//alert ( "html : " + a );
				//alert ( "html : " + data )
				//alert("success : \n" + data);
				//alert("html : " + decodeURIComponent (data));
			}
			function bestseller(startNumber){
				//var caObj = document.getElementById("CrossAjax");
				var sPram = new String();
				var caObj = window.document["CrossAjax"];
				//alert(caObj.width);
				sParam = "{\"url\":\"http://book.naver.com/outer_interface/blog/get_best_new_data.php?mode=bestseller&start="+ startNumber + "&display=4&ie=utf-8\", \"type\":\"GET\", \"data\":\"test\", \"callback\":\"test2\", \"header_json\":{\"pistos2\":true}, \"charset\":\"utf-8\"}";
				
				caObj.requestViaFlash(sParam);
				/*
				 * 
				caObj.SetVariable("url", "http://127.0.0.1:8000/request.html");
				caObj.SetVariable("type","GET");
				caObj.SetVariable("data","test");
				caObj.SetVariable("callback","test2");
				caObj.SetVariable("header_json","");
				caObj.SetVariable("charset","UTF-8");
				*/
				//caObj.requestViaFlash("http://127.0.0.1:8000/request.html","GET", "test", "test2", "", "UTF-8");
			}
			function trace(msg){
				console.log(msg);
			}
			function loaded()
			{
				alert("loaded");
			}
		//-->
		</script>
	</head>
	<body>
 	<h1>Test Cross-Domain Ajax</h1>
 
	<script language="JavaScript" type="text/javascript">
	<!--
		var flashVarsObj = {};
		flashVarsObj.activeCallback = "loaded";
		
		var obj = {}
		obj.flashVars = flashVarsObj;
		obj.wmode = "window";
		obj.allowScriptAccess = "always";
		obj.color = "#ffffff";
		
		nhn.FlashObject.show("AjaxProxy.swf?v=1.4.5", "CrossAjax", "0", "0", obj);
	// -->
	</script>
	
	<!--<object id="CrossAjax" width="0" height="0" align="" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0" > 
		<param name="movie" value="AjaxProxy.swf">
		<param name="quality" value="high"> 
		<param name="bgcolor" value="#ffffff"> 
		<param name = "allowScriptAccess" value = "always" />
		<embed name="CrossAjax" src="AjaxProxy.swf" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer"
			bgcolor="#ffffff"  width="0" height="0" align="" quality="high" allowScriptAccess="always" swLiveConnect=true ></embed>
	</object>-->

	<a href="javascript:test1();">test1()</a>
	<a href="javascript:bestseller(1);">bestseller(1)</a>
	<a href="javascript:bestseller(5);">bestseller(5)</a>
	
	</body>
</html>
